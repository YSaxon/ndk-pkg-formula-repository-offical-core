summary: Core application library for C
web-url: https://developer.gnome.org/glib
git-url: https://github.com/GNOME/glib
src-url: https://download.gnome.org/sources/glib/2.76/glib-2.76.1.tar.xz
src-sha: 43dc0f6a126958f5b454136c4398eab420249c16171a769784486e25f2fda19f
license: LGPL-2.1-or-later
dep-pkg: gettext libffi pcre2
dopatch: |
    sed_in_place "s|dependency('zlib')|cc.find_library('z', static : true, dirs : ['$zlib_LIBRARY_DIR'])|" meson.build

    if [ -f ../lib/libintl.a ] ; then
        printf 'INPUT(%s %s)\n' "$gettext_INSTALL_DIR/lib/libintl.a" "$libiconv_INSTALL_DIR/lib/libiconv.a" > ../lib/libintl.a
    fi
install: |
    mesonw \
        -Dnls=disabled \
        -Dman=false \
        -Dgtk_doc=false \
        -Ddtrace=false \
        -Dglib_debug=disabled \
        -Dglib_assert=false \
        -Dtests=false \
        -Dinstalled_tests=false \
        -Dbsymbolic_functions=false
