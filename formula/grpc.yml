summary: A modern, open source, high-performance remote procedure call (RPC) framework
web-url: https://grpc.io
git-url: https://github.com/grpc/grpc
src-url: https://github.com/grpc/grpc/archive/refs/tags/v1.58.1.tar.gz
src-sha: 860bf758a1437a03318bf09db8e87cb8149a2f578954110ce8549e147f868b62
license: Apache-2.0
dep-upp: grpc-plugins patch
dep-pkg: abseil c-ares openssl libprotobuf re2
    #ldflags: -llog

fix-url: https://github.com/grpc/grpc/commit/117dc80eb43021dd5619023ef6d02d0d6ec7ae7a.patch?full_index=1
fix-sha: 826896efc97e6c3bd3c38fc5e09642db4c6c4ec54597624ee8905da89e1ba7b6

dopatch: |
    patch -p1 < ../fix/826896efc97e6c3bd3c38fc5e09642db4c6c4ec54597624ee8905da89e1ba7b6.patch
    #sed_in_place 's|GPR_MUSL_LIBC_COMPAT|__ANDROID__|' src/core/lib/gpr/wrap_memcpy.cc

install: |
    cmakew \
        -DCMAKE_CXX_STANDARD=17 \
        -DCMAKE_CXX_STANDARD_REQUIRED=TRUE \
        -DBUILD_SHARED_LIBS=ON \
        -DgRPC_BUILD_TESTS=OFF \
        -DgRPC_INSTALL=ON \
        -DgRPC_ABSL_PROVIDER=package \
        -DgRPC_CARES_PROVIDER=package \
        -DgRPC_PROTOBUF_PROVIDER=package \
        -DgRPC_SSL_PROVIDER=package \
        -DgRPC_ZLIB_PROVIDER=package \
        -DgRPC_RE2_PROVIDER=package
